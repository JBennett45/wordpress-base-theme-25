class f extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form_wrap=this.querySelector(".wpcf-extension-wrap-cst"),this.custom_acceptance=this.querySelector(".custom-acceptance-cst")}connectedCallback(){this.custom_acceptance&&this.form.querySelectorAll(".custom-acceptance-cst__checkbox").forEach(t=>{t.addEventListener("click",this.customAccept.bind(this))}),this.customListeners()}customAccept=t=>{const e=t.currentTarget||t.target;if(!e){console.error("Nothing was passed into accept event.");return}let c=e.closest(".custom-acceptance-cst"),s=c.querySelector(".wpcf7-form-control-wrap input");c.classList.toggle("custom-acceptance-cst--active"),e.classList.toggle("custom-acceptance-cst__checkbox--active"),c.classList.contains("custom-acceptance-cst--active")?s.checked=!0:s.checked=!1};customListeners=()=>{this.form.addEventListener("wpcf7invalid",function(t){document.querySelector(".wpcf7-response-output").classList.remove("alertform-warning"),document.querySelector(".wpcf7-response-output").classList.add("alertform-danger")},!1),this.form.addEventListener("wpcf7spam",function(t){document.querySelector(".wpcf7-response-output").classList.remove("alertform-danger"),document.querySelector(".wpcf7-response-output").classList.add("alertform-warning")},!1),this.form.addEventListener("wpcf7mailfailed",function(t){document.querySelector(".wpcf7-response-output").classList.remove("alertform-danger"),document.querySelector(".wpcf7-response-output").classList.add("alertform-warning")},!1),this.form.addEventListener("wpcf7mailsent",function(t){document.querySelector(".wpcf7-response-output").classList.remove("alertform-danger"),document.querySelector(".wpcf7-response-output").classList.remove("alertform-warning"),document.querySelector(".wpcf7-response-output").classList.add("alertform-success")},!1),this.form.addEventListener("wpcf7submit",function(t){const e=t.currentTarget||t.target;e.querySelector(".custom-acceptance-cst")&&e.querySelectorAll(".custom-acceptance-cst").forEach(s=>{s.classList.remove("custom-acceptance-cst--error"),s.querySelector(".wpcf7-form-control-wrap input").checked==!1&&s.classList.add("custom-acceptance-cst--error")})},!1)}}customElements.define("cf-form-extension",f);const l=document.querySelector(".mbl-toggle-wrapp");l&&l.addEventListener("click",()=>{let o=document.getElementById("mbl-menu-ovrr-wrapp");l.classList.toggle("mbl-toggle-activated"),o&&(document.querySelector("body").classList.toggle("global-block-body-scroll-cst"),o.classList.toggle("activated-mbl-menu-ovrr-wrapp"))});document.querySelectorAll(".mbl-dropdown-watcher-cst .bst-opt-chevron-active-cst").forEach(o=>{o.addEventListener("click",t=>{t.preventDefault();let e="active-mobile-submenu-cst",c="active-mobile-item-cst",s="active-mobile-chevron-cst",i=o.closest("ul"),a=o.closest("li"),d=o.closest(".bst-opt-chevron-active-cst"),m=a.querySelector(".sub-menu"),h=a.getAttribute("ID");i.classList.contains("sub-menu")||document.querySelectorAll(".mbl-dropdown-watcher-cst li").forEach(n=>{let p=n.getAttribute("ID");if(p!=h){let u=document.querySelector("#"+p+" .sub-menu");n.querySelector(".bst-opt-chevron-active-cst").classList.remove(s),n.classList.remove(c),u&&u.classList.remove(e)}}),a.classList.contains(e)||(a.classList.toggle(c),d.classList.toggle(s),m.classList.toggle(e))})});let r;r=(o,t)=>{const e=o.querySelector(".global-loader-cst");e&&(t=="start"?e.classList.add("global-loader-cst--active"):e.classList.remove("global-loader-cst--active"))};class _ extends HTMLElement{constructor(){super(),this.query=this.dataset.queryvars,this.page=this.dataset.paged,this.post_count=this.dataset.postcount,this.max_paged=this.dataset.maxpages,this.post_type=this.dataset.posttype,this.post_wrapper=this.querySelector(".custom-posts-main-wrap"),this.btn_load_more=this.querySelector(".load-more-posts-btn-cst"),this.filter_instance=this.querySelector(".custom-tax-filter-wrapper"),this.filter_taxonomy=this.filter_instance.getAttribute("data-taxonomy")}connectedCallback(){this.checkPagedStatus(),this.btn_load_more.addEventListener("click",this.loadMorePosts.bind(this)),this.filter_instance&&this.filter_taxonomy&&this.filter_instance.querySelectorAll(".custom-tax-filter-item").forEach(t=>{t.addEventListener("click",this.filterPosts.bind(this))})}loadMorePosts=async t=>{t.preventDefault(),r(this.post_wrapper,"start"),this.btn_load_more.disabled=!0,this.btn_load_more.innerHTML="<span>Loading</span>";let e=new FormData;e.append("action","cst_load_more_posts"),e.append("query",this.query),e.append("currentpage",this.page),e.append("maxpage",this.max_paged),e.append("ptype",this.post_type);try{let s=await(await fetch(theme_ajax.url,{method:"POST",body:e})).json();s.success===1?(this.post_wrapper.innerHTML+=s.output,this.btn_load_more.disabled=!1,this.btn_load_more.innerHTML="<span>Load more</span>",this.dataset.paged=s.paged,this.checkPagedStatus(),r(this.post_wrapper,"end")):console.error("Something went wrong during the loadmore request, please contact admin.")}catch(c){console.error("Filter request failed",c),r(this.post_wrapper,"end")}};filterPosts=async t=>{t.preventDefault(),r(this.post_wrapper,"start");const e=t.currentTarget||t.target;if(!e){console.error("Filter element not found on click event"),r(this.post_wrapper,"end");return}const c=e.getAttribute("data-term-id"),s=new FormData;s.append("action","cst_filter_posts"),s.append("taxonomy",this.filter_taxonomy),s.append("ptype",this.post_type),s.append("limit",this.post_count),s.append("term",c);try{const a=await(await fetch(theme_ajax.url,{method:"POST",body:s})).json();a.success===1?(console.log(a),this.post_wrapper.innerHTML=a.output,this.dataset.queryvars=a.new_query,this.dataset.paged=a.new_current_page,this.dataset.maxpages=a.new_max_page,this.btn_load_more&&(a.new_current_page<a.new_max_page?this.btn_load_more.style.display="block":this.btn_load_more.style.display="none"),r(this.post_wrapper,"end")):(console.error("Something went wrong during the filter request, please contact admin."),r(this.post_wrapper,"end"))}catch(i){console.error("Filter request failed",i),r(this.post_wrapper,"end")}};checkPagedStatus=()=>{this.dataset.paged<this.max_paged?this.btn_load_more.style.display="block":this.btn_load_more.style.display="none"}}customElements.define("post-archive-control",_);const g=document.querySelector(".jb-custom-tabs-cst");g&&document.querySelectorAll(".jb-custom-tabs-title-cst__item").forEach(o=>{o.addEventListener("click",t=>{let e=o.getAttribute("data-target");document.querySelectorAll(".jb-custom-tabs-title-cst__item").forEach(c=>{c.classList.remove("jb-custom-tabs-title-cst__item--active")}),o.classList.add("jb-custom-tabs-title-cst__item--active"),document.querySelectorAll(".jb-custom-tabs-content-cst__item").forEach(c=>{c.getAttribute("data-target")==e?c.classList.add("jb-custom-tabs-content-cst__item--active"):c.classList.remove("jb-custom-tabs-content-cst__item--active")})})});class b extends HTMLElement{constructor(){super(),this.accordion_instance=this.querySelector(".jb-custom-accordion-cst"),this.accordion_item=this.querySelector(".jb-custom-accordion-cst__item")}connectedCallback(){this.accordion_instance&&this.accordion_instance.querySelectorAll(".jb-custom-accordion-cst__item__title").forEach(t=>{t.addEventListener("click",e=>{let c=t.closest(".jb-custom-accordion-cst__item");document.querySelectorAll(".jb-custom-accordion-cst__item").forEach(s=>{delete s.dataset.status}),c.dataset.status="active"})})}}customElements.define("custom-accordion-el",b);
